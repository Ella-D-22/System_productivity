<mat-card>
    <div *ngIf="loading">
        <p><small>Loading, please wait...</small></p>
        <p>
            <mat-progress-bar mode="query"></mat-progress-bar>
        </p>
    </div>

    <mat-card-header class="breadcrumb">
        <div>Home/Group Lending / Main Group</div>
    </mat-card-header>

    <div class="row">
        <div class="col-md-6 col-sm-12">
            <h4>Function</h4>
            <p>{{this.function_type}}</p>
        </div>
        <div class="col-md-6 col-sm-12">
            <h4>Code</h4>
            <p>{{this.group_code}}</p>
        </div>
    </div>
    <mat-divider></mat-divider>
    <br>
    <div class="container-fluid">
        <br>
        <form action="" class="form" [formGroup]="formData" novalidate (ngSubmit)="onSubmit()">
            <mat-tab-group mat-align-tabs="center">
                <mat-tab class="mat-tab" label="Group Details">
                    <br>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label class="start pull-left">Main Group Name<span class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupName" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label class="start pull-left">Group Formation Date<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input [matDatepicker]="ppicker" formControlName="mainGroupFormationDate"
                                        class="form-control" />
                                    <mat-datepicker-toggle *ngIf="isEnabled" matSuffix [for]="ppicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #ppicker></mat-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Branch<span class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupSolCode" class="form-control">
                                    <mat-icon (click)="branchLookup()">search</mat-icon>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Branch Name<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" class="form-control" formControlName="mainGroupBranchName"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Manager ID<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupManagerID" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Registration Number<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" class="form-control" formControlName="mainGroupRegNo"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Location<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupLocation" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Phone Number<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="mainGroupPhone" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">First Meeting Date<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input [matDatepicker]="mpicker" formControlName="mainGroupFirstMeetingDate"
                                        class="form-control" />
                                    <mat-datepicker-toggle *ngIf="isEnabled" matSuffix [for]="mpicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #mpicker></mat-datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Next Meeting Date<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input [matDatepicker]="npicker" formControlName="mainGroupNextMeetingDate"
                                        class="form-control" />
                                    <mat-datepicker-toggle *ngIf="isEnabled" matSuffix [for]="npicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #npicker></mat-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Max Allowed Members<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="mainGroupMaxAllowedMembers"
                                        class="form-control" oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Max Allowed SubGroups<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="mainGroupMaxAllowedSubGroups"
                                        class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Chairperson<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupChairperson" class="form-control">
                                    <mat-icon (click)="mainGroupChairpersonLookup()">search</mat-icon>
                                    <p></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Secretary<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupSecretary" class="form-control">
                                    <mat-icon (click)="mainGroupSecretaryLookup()">search</mat-icon>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Treasurer<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupTreasurer" class="form-control">
                                    <mat-icon (click)="mainGroupTreasurerLookup()">search</mat-icon>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Status<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="mainGroupStatus" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <mat-divider></mat-divider>
                    <br>

                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total No. of Members</label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" [attr.disabled]="true" formControlName="mainGroupTotalMembers"
                                        class="form-control ">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total No. of Exit Members</label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" [attr.disabled]="true"
                                        formControlName="mainGroupMeetingFrequency" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Saving Balances<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" [attr.disabled]="true" formControlName="mainGroupSavingAc"
                                        class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Loan Balances<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" [attr.disabled]="true"
                                        formControlName="mainGroupTotalSavingsBalance" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Transfer In Members<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" [attr.disabled]="true" formControlName="mainGroupSavingAc"
                                        class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Transfer Out Members<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" [attr.disabled]="true"
                                        formControlName="mainGroupTotalSavingsBalance" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-tab>
                <mat-tab *ngIf="dataExist" class="mat-tab" label="Sub Groups">
                    <br>
                    <div class="">
                        <div class="row table-action-row">
                            <div class="col-md-6 col-sm-12">
                                <div>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-12">
                                <mat-icon class="pull-right">search</mat-icon>
                                <input class="pull-right search form-control" (keyup)="applyFilter($event)"
                                    placeholder="Filter..." #input>
                            </div>
                        </div>
                        <br>
                        <div class="table-row">
                            <table class="y-scrollable-table" mat-table matSort matTableExporter
                                [dataSource]="dataSource">
                                <ng-container matColumnDef="index">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> # </th>
                                    <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
                                </ng-container>
                                <ng-container matColumnDef="subGroupCode">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Sub Group Code</th>
                                    <td mat-cell *matCellDef="let row"> {{row.subGroupCode}} </td>
                                </ng-container>
                                <ng-container matColumnDef="subGroupName">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Sub Group Name</th>
                                    <td mat-cell *matCellDef="let row"> {{row.subGroupName}} </td>
                                </ng-container>
                                <ng-container matColumnDef="subGroupFormationDate">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Created On</th>
                                    <td mat-cell *matCellDef="let row"> {{row.subGroupFormationDate | date}} </td>
                                </ng-container>
                                <ng-container matColumnDef="chairperson">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Chairperson</th>
                                    <td mat-cell *matCellDef="let row"> {{row.chairperson}} </td>
                                </ng-container>
                                <ng-container matColumnDef="subGroupPhone">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Subgroup Phone</th>
                                    <td mat-cell *matCellDef="let row"> {{row.subGroupPhone}} </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr (click)="onSelect(row)" mat-row *matRowDef="let row; columns: displayedColumns;">
                                </tr>
                                <!-- Row shown when there is no matching data.  -->
                                <tr class="mat-row" *matNoDataRow>
                                    <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                                </tr>
                            </table>
                        </div>
                        <mat-paginator [pageSizeOptions]="[7, 20, 30, 40, 50, 100]" aria-label="Select page of users">
                        </mat-paginator>
                    </div>
                </mat-tab>
            </mat-tab-group>
            <br>
            <button mat-raised-button color="default" routerLink="../../maintenance" type="submit">Back</button>
            <button mat-raised-button color="primary" type="submit" class="pull-right">Submit</button>
        </form>
    </div>
</mat-card>