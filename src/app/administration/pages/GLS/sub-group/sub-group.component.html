<mat-card>
    <div *ngIf="loading">
        <p><small>Loading, please wait...</small></p>
        <p>
            <mat-progress-bar mode="query"></mat-progress-bar>
        </p>
    </div>
    <mat-card-header class="breadcrumb">
        <div>Home/Sub Group Management</div>
    </mat-card-header>
    <div class="row">
        <div class="col-md-2 col-sm-12">
            <h4>Function</h4>
            <p>{{this.function_type}}</p>
        </div>
        <div class="col-md-2 col-sm-12">
            <h4>Main Group Name</h4>
            <p>{{this.mainGroupName}}</p>
        </div>
        <div class="col-md-2 col-sm-12">
            <h4>Main Group Code</h4>
            <p>{{this.mainGroupCode}}</p>
        </div>
        <div class="col-md-2 col-sm-12">
            <h4>Sub Group Name</h4>
            <p>{{this.subGroupName}}</p>
        </div>
        <div class="col-md-2 col-sm-12">
            <h4>Sub Group Code</h4>
            <p>{{this.subGroupCode}}</p>
        </div>
    </div>
    <mat-divider></mat-divider>
    <br>
    <div class="container-fluid">
        <br>
        <form action="" class="form" [formGroup]="formData" novalidate (ngSubmit)="onSubmit()">
            <mat-tab-group mat-align-tabs="center">
                <mat-tab class="mat-tab" label="Group Details">
                    <br>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Branch Code<span class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupSolCode" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                    <mat-icon (click)="branchLookup()">search</mat-icon>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Branch Name<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" class="form-control" formControlName="subGroupBranchName"
                                        oninput="this.value=this.value.toUpperCase()" [value]="">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">SubGroup Manager ID<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input etype="text" formControlName="subGroupManagerId" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Registration Number<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" class="form-control" formControlName="subGroupRegNo"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">SubGroup Location<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupLocation" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>

                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Phone Number<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="subGroupPhone" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label class="start pull-left">Group Formation Date<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input [matDatepicker]="ppicker" formControlName="subGroupFormationDate"
                                        class="form-control" />
                                    <mat-datepicker-toggle *ngIf="isEnabled" matSuffix [for]="ppicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #ppicker></mat-datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Status<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupStatus"
                                        oninput="this.value=this.value.toUpperCase()" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">First Meeting Date<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input [matDatepicker]="mpicker" formControlName="subGroupFirstMeetingDate"
                                        class="form-control" />
                                    <mat-datepicker-toggle *ngIf="isEnabled" matSuffix [for]="mpicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #mpicker></mat-datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Next Meeting Date<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input [matDatepicker]="npicker" formControlName="subGroupNextMeetingDate"
                                        class="form-control" />
                                    <mat-datepicker-toggle *ngIf="isEnabled" matSuffix [for]="npicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #npicker></mat-datepicker>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                           
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">SubGroup Chairperson<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupChairperson" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                    <mat-icon (click)="subGroupChairpersonLookup()">search</mat-icon>
                                    <p></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Group Secretary<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupSecretary" class="form-control">
                                    <mat-icon (click)="subGroupSecretaryLookup()">search</mat-icon>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Treasurer<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupTreasurer" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                    <mat-icon (click)="subGroupTreasurerLookup()">search</mat-icon>
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-tab>
                <mat-tab class="mat-tab" label="Financial Details">
                    <br>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Members</label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupTotalMembers" class="form-control "
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Meeting Frequency</label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="text" formControlName="subGroupMeetingFrequency" class="form-control"
                                        oninput="this.value=this.value.toUpperCase()">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Savings A/Cs<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="subGroupSavingsAc" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Savings Balance<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="subGroupTotalSavingBalance" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull-left">Total Loan A/Cs<span
                                            class="warning">*</span></label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="subGroupLoanAc" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-12 form-column">
                                    <label for="" class="start pull left">Total Loan Balances</label>
                                </div>
                                <div class="col-md-6 col-sm-12 form-column">
                                    <input type="number" formControlName="subGroupLoanBalance" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-tab>
                <mat-tab class="mat-tab" label="Members Details">
                    <br>
                        <div [formGroup]="groupMember">
                            <div class="row">
                                <div class="col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <div class="col-md-6 col-sm-12 form-column">
                                            <label for="" class="start pull-left">Customer Code<span
                                                    class="warning">*</span></label>
                                        </div>
                                        <div class="col-md-6 col-sm-12 form-column">
                                            <input type="text" formControlName="customerCode" class="form-control">
                                            <mat-icon (click)="customerLookup()">search</mat-icon>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-6 col-sm-12 form-column">
                                        </div>
                                        <div class="col-md-6 col-sm-12 form-column">
                                            <mat-hint>{{this.customerName}}</mat-hint>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <div class="col-md-6 col-sm-12 form-column">
                                            <label for="" class="start pull-left">Operations</label>
                                        </div>
                                        <div class="col-md-6 col-sm-12 form-column">
                                            <button mat-raised-button color="primary" type="button" class="pull-right" (click)="addGroupMember()"  >+ Add</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

<!--Sub Group Members -->
                    <div class="">
                        <div class="row table-action-row">
                          <div class="col-md-6 col-sm-12">
                        <div>
                        </div>
                            </div>
                          <div class="col-md-6 col-sm-12">
                          <mat-icon class="pull-right">search</mat-icon>
                          <input class="pull-right search form-control" (keyup)="applyFilter($event)" placeholder="Filter..." #input>
                          </div>
                        </div>
                        <br>  
                        <div class="table-row">
                          <table class="y-scrollable-table"mat-table matSort matTableExporter [dataSource] = "dataSource">
                           <ng-container matColumnDef="index">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> # </th>
                            <td  mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
                          </ng-container>
                          <ng-container matColumnDef="customerCode">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Customer Code</th>
                            <td  mat-cell *matCellDef="let group"> {{group.customerCode}} </td>
                          </ng-container>
                      
                          <ng-container matColumnDef="customerName">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Customer Name</th>
                            <td  mat-cell *matCellDef="let group"> {{group.customerName}} </td>
                          </ng-container>
                    
                          <ng-container matColumnDef="Operations">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Operations</th>
                            <td  mat-cell *matCellDef="let group"> 
                                <button class="table-buttons btn btn-small pull-right"  mat-raised-button color="warn" type="button"  (click)="onRemoveGroupMember(i)">Remove</button>
                                <button class="table-buttons btn btn-small pull-right"  mat-raised-button color="accent" type="button" (click)="onExitMember(group)">Exit</button>
                                <button class="table-buttons btn btn-small pull-right" mat-raised-button color="primary" type="button" (click)="onTransferMember(group)">Transfer</button>
                             </td>
                          </ng-container>
                    
                          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                      
                          <!-- Row shown when there is no matching data. -->
                          <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                          </tr>
                        </table>
                        </div>
                        <mat-paginator [pageSizeOptions]="[7, 20, 30, 40, 50, 100]" aria-label="Select page of users"></mat-paginator>
                      </div>

                </mat-tab>
            </mat-tab-group>
            <br>

            <button mat-raised-button color="default" routerLink="../../maintenance" type="submit">Back</button>
            <button mat-raised-button color="primary" type="submit" class="pull-right">Submit</button>
            <!-- <button mat-raised-button color="warn" type="submit" class="pull-right" *ngIf="isDeleted">Delete</button> -->
        </form>
    </div>
</mat-card>